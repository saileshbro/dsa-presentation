\documentclass[aspectratio=169]{beamer}
\usepackage{fontspec}
\usepackage{unicode-math}
\usepackage{tikz}
\usepackage{colortbl}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{xcolor}
\usepackage{listings}
\usepackage[style=apa,backend=biber,block=ragged,defernumbers=false]{biblatex}

% TikZ libraries
\usetikzlibrary{arrows,automata,positioning,shapes,calc,decorations.pathmorphing,patterns,math}

% Beamer theme
\usetheme{metropolis}

% Title page info
\title{Probabilistic Algorithms: What, Why, and How}
\subtitle{A Deep Dive into Randomness in Computing}
\author{Sailesh Dahal}
\institute{Kathmandu University}
\date{\today}

% Bibliography
\addbibresource{refs.bib}

% Listings configuration
\lstset{
    language=Python,
    basicstyle=\ttfamily\small,
    breaklines=true,
    frame=single,
    numbers=left,
    numberstyle=\tiny,
    keywordstyle=\color{blue},
    commentstyle=\color{green!60!black},
    stringstyle=\color{red},
    showstringspaces=false
}


\begin{document}

\begin{frame}
  \begin{tikzpicture}[remember picture,overlay]
    \node[anchor=south east, xshift=-5mm, yshift=5mm] at (current page.south east) {
      \includegraphics[width=2cm]{./assets/ku_logo.png}
    };
  \end{tikzpicture}
  \titlepage
\end{frame}

% Outline frame
\begin{frame}{Outline}
  \tableofcontents
\end{frame}

% What are Probabilistic Algorithms?
\section{What are Probabilistic Algorithms?}
\begin{frame}{What is a Probabilistic Algorithm?}
  \begin{block}{Definition}
    An algorithm that makes random choices during execution to influence its behavior or output.
  \end{block}
\end{frame}

% Combined Visual: Deterministic vs Probabilistic Algorithm
\begin{frame}{Deterministic vs Probabilistic Algorithm}
  % Deterministic Algorithm (top)
  \begin{center}
    \begin{tikzpicture}
      % Box
      \node[draw, fill=yellow!80, minimum width=4cm, minimum height=1.5cm] (box) {\footnotesize Deterministic Algorithm};
      % Input arrow
      \node[left=1.5cm of box, align=center] (input) {\footnotesize Input $x$};
      \draw[->, thick] (input) -- (box);
      % Output arrow
      \node[right=1.5cm of box, align=center] (output) {\footnotesize Output $y$};
      \draw[->, thick] (box) -- (output);
    \end{tikzpicture}
    \\[0.2em]
    {\footnotesize Deterministic}
  \end{center}
  \vspace{1.5em}
  % Probabilistic Algorithm (bottom)
  \begin{center}
    \begin{tikzpicture}
      % Box
      \node[draw, fill=gray!30, minimum width=4cm, minimum height=1.5cm] (box) {\footnotesize Randomized Algorithm};
      % Input arrow
      \node[left=1.5cm of box, align=center] (input) {\footnotesize Input $x$};
      \draw[->, thick] (input) -- (box);
      % Output arrow
      \node[right=1.5cm of box, align=center] (output) {\footnotesize Output $y_r$};
      \draw[->, thick] (box) -- (output);
      % Random bits arrow
      \node[above=0.8cm of box, align=center] (rand) {\footnotesize random bits $r$};
      \draw[->, thick] (rand) -- (box);
    \end{tikzpicture}
    \\[0.2em]
    {\footnotesize Probabilistic}
  \end{center}
\end{frame}

\begin{frame}{Types of Probabilistic Algorithms}
  \begin{itemize}
    \item Las Vegas Algorithms \parencite{lasvegas1979babai}
    \item Monte Carlo Algorithms \parencite{Metropolis01091949}
  \end{itemize}
\end{frame}
% Expanded: Las Vegas Algorithms

\begin{frame}{Las Vegas Algorithms}
  \textbf{Definition:} A Las Vegas algorithm always produces a correct result or reports failure, with the running time depending on random choices. \parencite{LasVegasGupta1992}
\end{frame}

% Expanded: Monte Carlo Algorithms
\begin{frame}{Monte Carlo Algorithms}
  \textbf{Definition:} A Monte Carlo algorithm has a probability of producing an incorrect result, but its running time is bounded. \parencite{MonteCarloError1991}
\end{frame}

% New section for applications
\section{Applications of Probabilistic Algorithms}

\begin{frame}{Real-World Motivation}
  \begin{itemize}
    \item Web search (PageRank)
    \item Load balancing (power of two choices)
    \item Hashing (universal hash functions)
    \item Primality testing (Miller-Rabin)
  \end{itemize}
\end{frame}

% Why use Probabilistic Algorithms?
\section{Why Probabilistic Algorithms?}
\begin{frame}{Why Randomness?}
  \begin{block}{Motivation}
    \begin{itemize}
      \item Simpler algorithms

      \item Better expected performance

      \item Avoid worst-case scenarios

      \item Useful for large-scale and distributed systems
    \end{itemize}
  \end{block}
\end{frame}

% How do Probabilistic Algorithms work?
\section{How do Probabilistic Algorithms Work?}
\begin{frame}{How: Randomization in Algorithms}
  \begin{block}{Key Idea}
    Use random choices to influence the algorithm's path or output.
  \end{block}

  \begin{itemize}
    \item Random pivot in Quicksort

    \item Random walks in graphs

    \item Random sampling
  \end{itemize}
\end{frame}



\input{./programs/quicksort/quicksort_steps.tex}

\input{./programs/analysis_quicksort/analysis_quicksort_steps.tex}

\input{./programs/pi_calculation/pi_calculation_steps.tex}

\input{./programs/bloom_filters/bloom_filters_steps.tex}


\begin{frame}[allowframebreaks]
  \printbibliography
\end{frame}

\end{document}
